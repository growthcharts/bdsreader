---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# bdsreader

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
<!-- badges: end -->

The `bdsreader` package is a lightweight package that

- Reads JSON files with data coded according to the Basisdataset JGZ protocol;
- Validates the data against a JSON schema;
- Calculates the child's D-score from individual Van Wiechen Schema (DDI) response;
- Adds Z-scores for height, weight, head circumference, BMI, weight-for-height and D-score measurements;
- Stores the result as a structured `tibble`.

The main use of the `bdsreader` is to translate incoming API request that contain child data into data objects useful for `R` processing. The package is part of Joint Automatic Measurement and Evaluation System (JAMES) as developed by the Netherlands Organisation for Applied Scientific Research TNO.

## Installation

Install the development version `bdsreader` by

```{r eval = FALSE}
install.packages("remotes")
remotes::install_github("growthcharts/bdsreader")
```

There is no CRAN release.

## Examples

The following lines illustrate the main use of `bdsreader`.

```{r}
library(bdsreader)
fn <- system.file("examples", "client3.json", package = "bdsreader")
read_bds(fn)
```

The file `client3.json` contains child data coded in JSON format. Here's the contents of the file:

```
{
   "Referentie":"fa308134-069e-49ce-9847-ccdae380ed6f",
   "OrganisatieCode":1234,
   "ClientGegevens":{
      "Elementen":[
         {
            "Bdsnummer":19,
            "Waarde":"2"
         },
         {
            "Bdsnummer":20,
            "Waarde":"20181011"
         },
         {
            "Bdsnummer":82,
            "Waarde":"189"
         },
         {
            "Bdsnummer":91,
            "Waarde":"1"
         },
         {
            "Bdsnummer":110,
            "Waarde":"990"
         },
         {
            "Bdsnummer":238,
            "Waarde":"1670"
         },
         {
            "Bdsnummer":240,
            "Waarde":"1900"
         }
      ],
      "Groepen":[
         {
            "Elementen":[
               {
                  "Bdsnummer":63,
                  "Waarde":"19950704"
               },
               {
                  "Bdsnummer":71,
                  "Waarde":"6030"
               },
               {
                  "Bdsnummer":62,
                  "Waarde":"01"
               }
            ]
         },
         {
            "Elementen":[
               {
                  "Bdsnummer":63,
                  "Waarde":"19901202"
               },
               {
                  "Bdsnummer":71,
                  "Waarde":"6030"
               },
               {
                  "Bdsnummer":62,
                  "Waarde":"02"
               }
            ]
         }
      ]
   },
   "Contactmomenten":[
      {
         "Tijdstip":"20181111",
         "Elementen":[
            {
               "Bdsnummer":235,
               "Waarde":"380"
            },
            {
               "Bdsnummer":245,
               "Waarde":"1250"
            },
            {
               "Bdsnummer":252,
               "Waarde":"270"
            }
         ]
      },
      {
         "Tijdstip":"20181211",
         "Elementen":[
            {
               "Bdsnummer":235,
               "Waarde":"435"
            },
            {
               "Bdsnummer":245,
               "Waarde":"2100"
            },
            {
               "Bdsnummer":252,
               "Waarde":"305"
            }
         ]
      }
   ]
}
```

