% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/write_bds.R
\name{write_bds}
\alias{write_bds}
\title{Write target data as bds-formatted JSON file}
\usage{
write_bds(
  x = NULL,
  version = 2L,
  schema = NULL,
  file = NULL,
  organisation = 0L,
  indent = NULL,
  check = TRUE,
  verbose = FALSE,
  ...
)
}
\arguments{
\item{x}{Tibble with an attribute called \code{person}}

\item{version}{Integer. JSON schema version number. There are currently two
schemas supported, versions \code{1} and \code{2}.}

\item{schema}{A file name with the JSON validation schema.
The \code{schema} argument overrides \code{version}. The function extracts the
character following the string \code{"_v"} in the name, and overwrites the
\code{version} argument by the integer representation of the found character.}

\item{file}{File name. The default (\code{NULL}) returns the json representation
of the data and does not write to a file.}

\item{organisation}{Integer. Organisation number of the caller. Optional.}

\item{indent}{Integer. Number of spaces to indent when using
\code{jsonlite::prettify()}. When not specified, the function writes
minified json.}

\item{check}{Logical. Should function check json to conform to schema?}

\item{verbose}{Logical. Print file message?}

\item{\dots}{Passed down to \code{\link[jsonlite:fromJSON]{jsonlite::toJSON()}}.}
}
\value{
A string with bds-formatted JSON codes, or \code{NULL} for invalid
JSON
}
\description{
This function takes data from a tibble with a person attribute
and saves it into JSON bds format (which can be sent to JAMES).
}
\details{
Functions \code{read_bds()} and \code{write_bds()} are inverse operations.

If the date of birth is not known, the conversion uses the
artificial birth date \verb{01 Jan 2000} to calculate measurement
dates from age.
}
\examples{
fn <- system.file("examples", "Laura_S.json", package = "bdsreader")
tgt <- read_bds(fn, version = 1, append_ddi = FALSE)
js1 <- write_bds(tgt, version = 1)
js2 <- write_bds(tgt)
}
\seealso{
\code{\link[jsonlite:fromJSON]{jsonlite::toJSON()}}
}
\author{
Stef van Buuren 2021
}
